_format_version: '3.0'

_proxy_listen: ${KONG_PROXY_LISTEN}
_admin_listen: ${KONG_ADMIN_LISTEN}

services:
  - name: users-api-service
    host: __KONG_USERS_API_URL__
    port: 3000
    routes:
      - name: users-register-route
        paths:
          - /users
        methods: ['POST']
        strip_path: false
      - name: users-authenticate-route
        paths:
          - /users/authenticate
        methods: ['POST']
        strip_path: false

  - name: urls-api-service
    host: __KONG_URLS_API_URL__
    port: 3001
    routes:
      - name: urls-click-route
        paths:
          - /
        methods: ['GET']
        strip_path: false
      - name: urls-operations-routes
        paths:
          - /urls
        methods: ['GET', 'POST', 'PATCH', 'DELETE']
        strip_path: false
